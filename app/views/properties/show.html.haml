%script{src: "https://maps.googleapis.com/maps/api/js?key=AIzaSyCaySzq6ccMnlPHQOSEm0Ay_hM0P7NdoMI&callback=initMap"}
.properties-show-page-wrapper
  .sub-header
    - breadcrumb :show_property
    = breadcrumbs pretext: "", separator: " &rsaquo; ", class: "breadcrumbs-list"
  %main.horizontal-top-line
    %section
      .section-title
        %span - PROPERTY ABOUT-
        %h3
          = "ç‰©ä»¶è©³ç´°" 
      .content-wrapper
        .property-title-line
          .dom-block-1.slash
            %h1
              Property Name
            %ruby
              %rb
                = @property.name
              %rt
                = @property.name_kana
          .dom-block-2.slash
            -if @property.rank.id != 4
              %h1
                Rank
            -else
              %h1.opacity-text
                Rank
            - case @property.rank.id
            - when 1 then
              %h2.rank-text-a
                = "#{@property.rank.name}ãƒ©ãƒ³ã‚¯"
                = image_tag "a-rank-gold.png", class: "rank-img"
            - when 2 then
              %h2.rank-text-b
                = "#{@property.rank.name}ãƒ©ãƒ³ã‚¯"
                = image_tag "b-rank-silver.png", class: "rank-img"
            - when 3 then
              %h2.rank-text-c
                = "#{@property.rank.name}ãƒ©ãƒ³ã‚¯"
                = image_tag "c-rank-bronze.png", class: "rank-img"
            - when 4 then
              %h2.rank-text-d
                = "#{@property.rank.name}ãƒ©ãƒ³ã‚¯"
                = image_tag "d-rank-skull.png", class: "rank-img"
          -# ç®—å‡ºã™ã‚‹ç‚ºã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è€ƒãˆã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§ä¸€æ™‚çš„ãªã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆğŸ˜€
          -# .dom-block-3.slash
          -#   %table
          -#     %tr
          -#       %th
          -#         ç¾åœ¨ã®ç·åç›Šãƒªã‚½ãƒ¼ã‚¹
          -#       %th
          -#         Â¥360,000
          -#       %th
          -#         å‰æœˆã®ç·åç›Šãƒªã‚½ãƒ¼ã‚¹:
          -#       %th
          -#         Â¥390,000
          -#       %th
          -#         å‰æœˆæ¯”:
          -#       %th
          -#         +8.3%å¢—
          -#     %tr
          -#       %th
          -#         ç·åç›Šãƒªã‚½ãƒ¼ã‚¹å‰æœˆæ¯”:
          -#       %th
          -#         +13%
          -#     %tr
          -#       %th
          -#         é”æˆé«˜:
          -#       %th
          -#         Â¥100,000
        .property-image-line
          .property-image
            %h1
              ImagePhoto
            = image_tag @property.image, class: "property-img" if @property.image.attached?
          .about-address
            %h1
              Address
            %table.type-black
              %tr
                %th.fix-width-left
                  = "ç‰©ä»¶æ‰€åœ¨åœ°"
                %th.fix-width-middle
                  %i.fas.fa-tenge
                  = @property.post_code 
                %th.fix-width-right#map-dom
                  = "#{@property.prefecture.name}#{@property.city}#{@property.street}"
            #map
        .double-wrap
          .property-about-line
            .title-wrap
              %h1 About
              %h1.ja ç‰©ä»¶æ¦‚è¦
            %table
              %tr
                %th ç‰©ä»¶ç¨®åˆ¥
                %th ç·æˆ¸æ•°
                %th ç®¡ç†å½¢æ…‹
              %tr
                %td=@property.type.name
                %td= "#{@property.units}æˆ¸"
                %td= "#{@property.management_form.name}"
            %table
              %tr
                %th.coution â€» æ³¨æ„äº‹é … â€»
              %tr
                %td.coution-text= "#{@property.caution}"
          .property-lifeline-line
            .title-wrap
              %h1 LifeLine
              %h1.ja ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³
            %table
              %tr
                %th ä¸Šæ°´é“
                %th ä¸‹æ°´é“
                %th é›»æ°—
                %th ã‚¬ã‚¹
              %tr
                %td
                  ="#{@property.utility.water_supply.name}"
                  %i.fas.fa-check
                %td
                  = "#{@property.utility.sewer.name}"
                  %i.fas.fa-check
                %td
                  = "#{@property.utility.electrical.name}"
                  %i.fas.fa-check
                %td
                  = "#{@property.utility.ga.name}"
                  %i.fas.fa-check
            =link_to "â–¶æ©Ÿé–¢æƒ…å ±ã‚’è¿½åŠ ã™ã‚‹", "#", class: "organization_add"
        .property-owner-line
          .left-block
            .title-wrap
              %h1 Owner
              %h1.ja æ‰€æœ‰è€…æƒ…å ±
              =link_to "â–¶æ‰€æœ‰è€…è©³ç´°ã«é€²ã‚€", "#", class: "owner-show"
            %table.first
              %tr
                %th.top-cell æ‰€æœ‰å½¢æ…‹
                -unless @property.owner.swicth_owner_form
                  %td å€‹äºº
                -else
                  %td æ³•äºº
                -unless @property.owner.swicth_owner_form
                  -unless @property.owner.gender
                    %th.top-cell æ€§åˆ¥
                    %td ç”·æ€§
                    %td.gender-cell-mars
                      %i.fas.fa-mars
                  -else
                    %th.top-cell æ€§åˆ¥
                    %td å¥³æ€§
                    %td.gender-cell-venus
                      %i.fas.fa-venus
            %table.second
              %tr
                %th.top-cell ã‚«ãƒŠ
                -unless @property.owner.swicth_owner_form
                  %td="#{@property.owner.last_name_kana} #{@property.owner.first_name_kana}"
                -else
                  %td="#{@property.owner.company_name_kana}"
              %tr
                %th.top-cell æ‰€æœ‰è€…åç§°
                -unless @property.owner.swicth_owner_form
                  %td="#{@property.owner.last_name} #{@property.owner.first_name}"
                -else
                  %td="#{@property.owner.company_name}"
            %table.third
              %tr
                %th.top-cell ä¸»è¦ãªã‚„ã‚Šå–ã‚Šäººç‰©
                %td="#{@property.owner.main_communication}"
            .relation-person-make
              = link_to "â–¶é–¢ä¿‚äººç‰©ã‚’ä½œæˆã™ã‚‹", "#",class: "new-relation-person"
              = link_to "â–¶ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹", "#", class: "relation-build"
            %table.fourth
              %tr
                %th ã‚„ã‚Šå–ã‚Šæ–¹æ³•ã«ã¤ã„ã¦
              %tr
                %td="#{@property.owner.communication_about}"
            %table.fifth
              %tr
                %th.top-cell å›ºå®šé›»è©±ç•ªå·
                -unless @property.owner.home_phone_num.empty?
                  %td="#{@property.owner.home_phone_num}"
                -else
                  %td -
              %tr
                %th.top-cell æºå¸¯é›»è©±ç•ªå·
                -unless @property.owner.phone_num.empty?
                  %td="#{@property.owner.phone_num}"
                -else
                  %td -
              %tr
                %th.top-cell ãã®ä»–é›»è©±ç•ªå·
                -unless @property.owner.other_phone_num.empty?
                  %td="#{@property.owner.other_phone_num}"
                -else
                  %td -
              %tr
                %th.top-cell FAXç•ªå·
                -unless @property.owner.fax_num.empty?
                  %td="#{@property.owner.fax_num}"
                -else
                  %td -
              %tr
                %th.top-cell ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
                -unless @property.owner.email.empty?
                  %td="#{@property.owner.email}"
                -else
                  %td -
          .about-address
            %h1
              Address
            %table
              %tr
                %th.fix-width-left
                  = "æ‰€æœ‰è€…ä½æ‰€"
                %th.fix-width-middle
                  %i.fas.fa-tenge
                  = @property.post_code 
                %th.fix-width-right#owner-map-dom
                  = "#{@property.owner.prefecture.name}#{@property.owner.city}#{@property.owner.street}#{@property.owner.building_name}"
            #map-owner
        .property-room-line
          .title-wrap
            %h1
              RoomStore
            %h1.ja
              éƒ¨å±‹æƒ…å ±
          .coution-no-create
            = "#{@property.units-Property.find(@property.id).rooms.count}å®¤ç™»éŒ²ãŒã§ãã¦ã„ãªã„ç‰©ä»¶ãŒã‚ã‚Šã¾ã™ã€‚ç™»éŒ²ã•ã‚Œã¦ã„ãªã„ç‰©ä»¶ãŒã‚ã‚‹å ´åˆã«ã¯ã€æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã§ããªã„å ´åˆãŒã”ã–ã„ã¾ã™ã®ã§ã€ã”æ³¨æ„ãã ã•ã„ã€‚ğŸ˜¼ä½œæˆã•ã‚Œã¦ã„ãªã„ç‰©ä»¶ãŒä¸€ã¤ã§ã‚‚ã‚ã‚Œã°ã€è¡¨ç¤ºã™ã‚‹ï¼"
          .room-wrap
            -if @property.rooms.empty?
              - @property.units.times do |unit|
                .room-box
                  .room-upper
                    æœªç™»éŒ²
                  = content_tag(:div, id: "room-content#{unit+1}", class: "room-rower") do
                    = link_to "éƒ¨å±‹ç™»éŒ²", room_path(@property.id)
            -unless @property.rooms.empty?
              - rooms = Property.find(@property.id).rooms.order(room_num: "asc")
              - room_count = Property.find(@property.id).rooms.count
              - floor_count = Property.find(@property.id).rooms.select(:floor).distinct.count
              - floor_num = Property.find(@property.id).rooms.select(:floor).distinct.order(floor: "asc")
              -floor_count.times do |i|
              -floor_room = @property.rooms.where(floor: i+1).order(room_num: "asc")
                .floor
                  .floor-number-area
                    ="#{floor_num[i].floor}F"
                  %span
                  %table
                    -floor_room.count.times do |room|
                      %tr
                        %th{collspan: 1}=floor_room[room].room_num
                        %th{collspan: 1}
                          -if floor_room[room].room_status
                            .room-status-in
                              å…¥å±…ä¸­
                          -else 
                            .room-status-out
                              ç©ºå®¤
                        %td
                          =link_to "ç‰©ä»¶è©³ç´°", "#"
                          %br
                          =link_to "åç›Šãƒªã‚½ãƒ¼ã‚¹ç™»éŒ²", 
                          resource_room_path(@property.id), class: "red"
                          %br
              -# %table
              -#   %tr
              -#     -room_count.times do |i|
              -#       %th=@property.rooms.order(room_num: "asc")[i].room_num
              -#   %tr
              -#     -room_count.times do |i|
              -#       %td
              -#         =link_to "éƒ¨å±‹è©³ç´°", room_path(@property.id)
              -#         %br
              -#         =link_to "ãƒªã‚½ãƒ¼ã‚¹æ§‹ç¯‰", room_path(@property.id)
              -#         %br
              -#         =link_to "", room_path(@property.id)
                -# - i = 0
                -# -while room_count >= i+1 do
                -#   %tr
                -#     -while room_count >= i+1 do
                -#       %th=@property.rooms.order(room_num: "asc")[i].room_num
                -# -while room_count >= i+1 do
                -# - i = 0
                -#   %tr
                -#     -while room_count >= i+1 do
                -#       %td b
                -#       -i = i + 1;
                    -# -while ((room_count != i)) do
                      %th a
                      %td b
                      -i = i + 1;
                    -# -while (rooms%10) || (not(rooms) == 0)
                    -# -while (rooms%10) || (not(rooms) == 0)
                    -#   %th a
                    -#   %td b
                -# -room_count.times do |count|
                -#   -if (count+1 == 1) || ((count+1)%10 == 0) 
                -#     %tr
                -#       %th=rooms[count].room_num
                -#     %tr
                -#       %td=link_to "éƒ¨å±‹è©³ç´°", room_path(@property.rooms[count])
              -#     -else
              -#       %th=rooms[count].room_num
              -#       %td=link_to "éƒ¨å±‹è©³ç´°", room_path(@property.rooms[count])
              -#     -else
              -#       -room_count.times do |count| 
              -#         -if room_count >= count+1
              -#           -unless room_count%10
              -#             %td= link_to "éƒ¨å±‹è©³ç´°", room_path(@property.rooms[count])
              -# -if @property.units >= room_count
              -#   - no_create_room_count = @property.units - room_count
              -#   %table.no-create
              -#     %tr
              -#       - no_create_room_count.times do |room|
              -#         %th æœªç™»éŒ²
              -#     %tr
              -#       - no_create_room_count.times do |room|
              -#         %td= link_to "ç™»éŒ²ã™ã‚‹", room_path(@property.id)
                      
                      
                -# -else
                -#   .room-box
                -#     .room-upper
                -#       æœªç™»éŒ²
                -#     = content_tag(:div, id: "room-content#{unit+1}", class: "room-rower") do
                -#       = link_to "éƒ¨å±‹ç™»éŒ²", room_path(@property.id)


